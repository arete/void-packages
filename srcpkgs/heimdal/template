# Template file for 'heimdal'
pkgname=heimdal
version=7.1.0
revision=1
build_style=gnu-configure
makedepends="ncurses-devel"
short_desc="Kerberos 5, PKIX, GSS-API, SPNEGO, NTLM, MD5, SASL implementation"
maintainer="Enno Boland <gottox@voidlinux.eu>"
license="GPL-3"
homepage="http://www.h5l.org/"
distfiles="https://github.com/heimdal/heimdal/releases/download/heimdal-$version/heimdal-$version.tar.gz"
checksum=cee58ab3a4ce79f243a3e73f465dac19fe2b93ef1c5ff244d6f1d689fedbde2d
configure_args="
 --without-openldap
 --without-capng
 --without-sqlite3
 --without-libintl
 --without-openssl
 --without-berkeley-db
 --without-readline
 --without-libedit
 --without-hesiod
 --without-x
 --disable-heimdal-documentation"

post_install() {
	rm $DESTDIR/usr/share/man/cat* -r
	rm $DESTDIR/usr/bin/su $DESTDIR/usr/share/man/man1/su.1

	vinstall lib/com_err/.libs/compile_et 755 usr/libexec/heimdal
}

heimdal-devel_package() {
	depends="${sourcepkg}>=${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/share/man/man3
		vmove usr/include
		vmove usr/lib/pkgconfig
		vmove "usr/lib/*.a"
		vmove "usr/lib/*.so"
	}
}
